(function(){angular.module("scroller",[]).directive("scroller",function(u,v,w){return{restrict:"EA",scope:{getNextNode:"&next",buffer_status:"=status"},link:function(c,e,k){var n,b,q,r,l,p;n=angular.element(v);p=!0;var f=function(a){a=a[0]||a;return isNaN(a.offsetHeight)?a.document.documentElement.clientHeight:a.offsetHeight},m=function(a){if(a[0].getBoundingClientRect&&!a.css("none"))return a[0].getBoundingClientRect().top+t(a)},t=function(a){a=a[0]||a;return isNaN(window.pageYOffset)?a.document.documentElement.scrollTop:
a.ownerDocument.defaultView.pageYOffset},g=function(){var a,d;b===n?(a=f(b)+t(b[0].document.documentElement),d=m(e)+f(e)):(a=f(b),d=0,void 0!==m(b)&&(d=m(b)),d=m(e)-d+f(e));if(d-a<f(b)*q+1){if(l=!0,r)return c.$$phase||u.$$phase?c.getNextNode():c.$digest(c.getNextNode())}else return l=!1};c.$on("$destroy",function(){b.unbind("scroll",g)});q=parseFloat(k.distance)||0;var h=function(a){null!=b&&b.unbind("scroll",g);b=a;if(null!=a)return b.bind("scroll",g)};null!=k.scrollParent?h(angular.element(e.parent())):
h(n);h=function(a){if((r=!a)&&l)return l=!1,g()};c.$watch("buffer_status",h);h(c.buffer_status);null!=k.immediateCheck&&(p=c.$eval(k.immediateCheck));return w(function(){if(p)return g()},0,1)}}})})();
